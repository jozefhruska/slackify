# Migration `20200525194002-add-special-id-to-user-model`

This migration has been generated by Jozef Hru≈°ka at 5/25/2020, 7:40:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "slackId" text  NOT NULL ;

CREATE UNIQUE INDEX "User.slackId_teamId" ON "public"."User"("slackId","teamId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200523222756-update-component-data-relations..20200525194002-add-special-id-to-user-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
   enabled  = env("DATABASE_URL")
 }
 generator cient_common {
@@ -9,17 +9,20 @@
   output   = "../../node_modules/@prisma/client"
 }
 model User {
-  id          String      @id
+  id          String      @default(cuid()) @id
+  slackId     String
   email       String      @unique
   name        String
   role        UserRole    @default(VIEWER)
   accessToken String      @unique
   avatar      String?
   team        Team        @relation(fields: [teamId], references: [id])
   teamId      String
   components  Component[]
+
+  @@unique([slackId, teamId])
 }
 model Collection {
   id          String        @default(cuid()) @id
```


