# Migration `20200218134236-add-team-model`

This migration has been generated by Jozef Hru≈°ka at 2/18/2020, 1:42:36 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Team" (
    "domain" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."User" ADD COLUMN "team" text  NOT NULL ;

ALTER TABLE "public"."Category" ADD COLUMN "team" text  NOT NULL ;

ALTER TABLE "public"."User" ADD FOREIGN KEY ("team") REFERENCES "public"."Team"("id") ON DELETE RESTRICT

ALTER TABLE "public"."Category" ADD FOREIGN KEY ("team") REFERENCES "public"."Team"("id") ON DELETE RESTRICT
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200209153448-add-category-model..20200218134236-add-team-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,29 +1,38 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
   enabled  = env("POSTGRES_URL")
-  // url = "***"
+  // url      = "postgresql://postgres:password@localhost:5432/postgres"
 }
 generator photon {
   provider = "prisma-client-js"
+  output   = "../service-slack/generated/client"
 }
 model User {
   id          String @id
   email       String @unique
   name        String
   accessToken String @unique
+  team        Team
   posts       Post[]
 }
 model Category {
-  id          String @default(cuid()) @id
-  handle      String
-  posts       Post[]
+  id     String @default(cuid()) @id
+  handle String
+  team   Team
+  posts  Post[]
 }
+model Team {
+  id     String @id
+  name   String
+  domain String
+}
+
 model Post {
   id          String   @default(cuid()) @id
   type        String
   title       String
```


