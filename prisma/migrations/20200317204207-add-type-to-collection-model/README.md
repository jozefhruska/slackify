# Migration `20200317204207-add-type-to-collection-model`

This migration has been generated by Jozef Hru≈°ka at 3/17/2020, 8:42:07 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."Collection.handle_team"

ALTER TABLE "public"."Collection" DROP COLUMN "handle",
ADD COLUMN "description" text   ,
ADD COLUMN "name" text  NOT NULL DEFAULT '',
ADD COLUMN "type" "ComponentType" NOT NULL DEFAULT 'PLAIN_TEXT';

CREATE UNIQUE INDEX "Collection.name_team" ON "public"."Collection"("name","team")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200315185957-add-missing-id-tag-to-collection..20200317204207-add-type-to-collection-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,9 +1,9 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
   enabled  = env("POSTGRES_URL")
-  // url = "***"
+  // url      = "postgresql://postgres:password@localhost:5432/postgres"
 }
 generator cient_prisma {
   provider = "prisma-client-js"
@@ -39,14 +39,16 @@
   image_512   String?
 }
 model Collection {
-  id         String      @default(cuid()) @id
-  handle     String
-  team       Team
-  components Component[]
+  id          String        @default(cuid()) @id
+  name        String
+  type        ComponentType
+  description String?
+  team        Team
+  components  Component[]
-  @@unique([handle, team])
+  @@unique([name, team])
 }
 model Team {
   id          String       @id
```


