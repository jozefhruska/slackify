# Migration `20200315185957-add-missing-id-tag-to-collection`

This migration has been generated by Jozef Hru≈°ka at 3/15/2020, 6:59:57 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Collection" ALTER COLUMN "id" DROP DEFAULT;

ALTER TABLE "public"."Component" DROP CONSTRAINT IF EXiSTS "Component_collection_handle_collection_team_fkey",
DROP COLUMN "collection_handle",
DROP COLUMN "collection_team",
ADD COLUMN "collection" text  NOT NULL ;

ALTER TABLE "public"."Component" ADD FOREIGN KEY ("collection")REFERENCES "public"."Collection"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200315185351-add-missing-relations-to-component-data-models..20200315185957-add-missing-id-tag-to-collection
--- datamodel.dml
+++ datamodel.dml
@@ -1,9 +1,9 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
   enabled  = env("POSTGRES_URL")
-  // url = "***"
+  // url      = "postgresql://postgres:password@localhost:5432/postgres"
 }
 generator cient_prisma {
   provider = "prisma-client-js"
@@ -39,9 +39,9 @@
   image_512   String?
 }
 model Collection {
-  id         String      @default(cuid())
+  id         String      @default(cuid()) @id
   handle     String
   team       Team
   components Component[]
```


