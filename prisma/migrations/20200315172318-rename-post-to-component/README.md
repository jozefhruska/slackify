# Migration `20200315172318-rename-post-to-component`

This migration has been generated by Jozef Hru≈°ka at 3/15/2020, 5:23:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Component" (
    "author" text  NOT NULL ,
    "collection" text  NOT NULL ,
    "content" text   ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "isPublished" boolean  NOT NULL DEFAULT false,
    "short" text  NOT NULL DEFAULT '',
    "title" text  NOT NULL DEFAULT '',
    "type" text  NOT NULL DEFAULT '',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."Component" ADD FOREIGN KEY ("author")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Component" ADD FOREIGN KEY ("collection")REFERENCES "public"."Collection"("id") ON DELETE CASCADE  ON UPDATE CASCADE

DROP TABLE "public"."Post";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200313175008-add-user-avatars..20200315172318-rename-post-to-component
--- datamodel.dml
+++ datamodel.dml
@@ -1,9 +1,9 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
   enabled  = env("POSTGRES_URL")
-  // url = "***"
+  // url      = "postgresql://postgres:password@localhost:5432/postgres"
 }
 generator cient_prisma {
   provider = "prisma-client-js"
@@ -24,14 +24,14 @@
   output   = "../service-public/node_modules/@prisma/client"
 }
 model User {
-  id          String  @id
-  email       String  @unique
+  id          String      @id
+  email       String      @unique
   name        String
-  accessToken String  @unique
+  accessToken String      @unique
   team        Team
-  posts       Post[]
+  components  Component[]
   image_24    String?
   image_32    String?
   image_48    String?
   image_72    String?
@@ -39,12 +39,12 @@
   image_512   String?
 }
 model Collection {
-  id     String @default(cuid()) @id
-  handle String
-  team   Team
-  posts  Post[]
+  id         String      @default(cuid()) @id
+  handle     String
+  team       Team
+  components Component[]
 }
 model Team {
   id          String @id
@@ -52,9 +52,9 @@
   domain      String @unique
   accessToken String @unique
 }
-model Post {
+model Component {
   id          String     @default(cuid()) @id
   type        String
   title       String
   short       String
```


